<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>About - VS Code Contributors</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <nav>
        <a href="/" class="nav-brand">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M29.01,5.03,23.244,2.254a1.742,1.742,0,0,0-1.989.338L2.38,19.8A1.166,1.166,0,0,0,2.3,21.447c.025.027.05.053.077.077l1.541,1.4a1.165,1.165,0,0,0,1.489.066L28.142,5.75A1.158,1.158,0,0,1,30,6.672V6.605A1.748,1.748,0,0,0,29.01,5.03Z" style="fill:#0065a9"/><path d="M29.01,26.97l-5.766,2.777a1.745,1.745,0,0,1-1.989-.338L2.38,12.2A1.166,1.166,0,0,1,2.3,10.553c.025-.027.05-.053.077-.077l1.541-1.4A1.165,1.165,0,0,1,5.41,9.01L28.142,26.25A1.158,1.158,0,0,0,30,25.328V25.4A1.749,1.749,0,0,1,29.01,26.97Z" style="fill:#007acc"/><path d="M23.244,29.747a1.745,1.745,0,0,1-1.989-.338A1.025,1.025,0,0,0,23,28.684V3.316a1.024,1.024,0,0,0-1.749-.724,1.744,1.744,0,0,1,1.989-.339l5.765,2.772A1.748,1.748,0,0,1,30,6.6V25.4a1.748,1.748,0,0,1-.991,1.576Z" style="fill:#1f9cf0"/></svg>
            <span>VS Code Contributors</span>
        </a>
        <a href="/" class="nav-link">Home</a>
        <a href="/contributors" class="nav-link">Contributors</a>
        <a href="/leaderboard" class="nav-link">Leaderboard</a>
        <a href="/ask" class="nav-link">Ask AI</a>
        <a href="/about" class="nav-link active">About</a>
        <span class="spacer"></span>
        <form action="/search" method="GET" class="nav-search-form">
            <input type="text" name="q" placeholder="Search contributors..." class="nav-search-input">
        </form>
        <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle theme">
            <span id="theme-icon">‚òÄÔ∏è</span> <span id="theme-label">Light</span>
        </button>
    </nav>

    <main>
        <div class="about-content">
            <h1>About This Project</h1>
            <p class="lead">Visual Studio Code is built in the open by Microsoft and a global community of contributors. This site celebrates the people behind every pull request.</p>

            <h2>What is this?</h2>
            <p>Each VS Code release includes a "Thank You" section in its <a href="https://code.visualstudio.com/updates" target="_blank" rel="noopener">release notes</a>, listing community members who contributed code during that release cycle. This website scrapes that data and presents it in a browsable, searchable format.</p>

            <h2>How it works</h2>
            <ul>
                <li>Release notes are fetched from the official VS Code documentation</li>
                <li>Contributor names, GitHub handles, and pull request links are extracted</li>
                <li>Data is organized by release version for easy browsing</li>
                <li>You can send kudos to show your appreciation</li>
            </ul>

            <h2>Tech stack</h2>
            <p>Built with Go, using the standard library for HTTP serving and HTML templates. Deployed on Vercel as serverless functions. Contributor data is scraped in the background and cached in memory.</p>
            <div class="tech-stack-visual">
                <span class="tech-tag">Go</span>
                <span class="tech-tag">HTML Templates</span>
                <span class="tech-tag">Vercel</span>
                <span class="tech-tag">GitHub API</span>
                <span class="tech-tag">CSS Animations</span>
            </div>

            <h2>Contributing</h2>
            <p>This project is open source. If you have ideas for improvements or find a bug, feel free to open an issue or submit a pull request.</p>
        </div>
    </main>

    <footer>
        <div class="footer-inner">
            <div class="footer-left">
                <span class="status-dot"></span>
                <span>Built with care</span>
            </div>
            <div class="footer-right">
                Data sourced from <a href="https://code.visualstudio.com/updates" target="_blank" rel="noopener">VS Code Release Notes</a>
            </div>
        </div>
    </footer>

    <script>
        function toggleTheme() {
            const html = document.documentElement;
            const current = html.getAttribute('data-theme');
            const next = current === 'light' ? 'dark' : 'light';
            html.setAttribute('data-theme', next);
            localStorage.setItem('theme', next);
            updateToggleUI(next);
        }
        function updateToggleUI(theme) {
            document.getElementById('theme-icon').textContent = theme === 'light' ? 'üåô' : '‚òÄÔ∏è';
            document.getElementById('theme-label').textContent = theme === 'light' ? 'Dark' : 'Light';
        }
        (function() {
            const saved = localStorage.getItem('theme') || 'dark';
            document.documentElement.setAttribute('data-theme', saved);
            updateToggleUI(saved);
        })();
    </script>

    <!-- Floating Chat Widget -->
    <button class="chat-widget-trigger" id="chatWidgetTrigger" aria-label="Open AI Assistant">
        <svg class="icon-chat" width="24" height="24" viewBox="0 0 16 16" fill="currentColor">
            <path d="M8 0a8 8 0 100 16A8 8 0 008 0zM5.5 4.002h5a.5.5 0 01.5.5v5a.5.5 0 01-.5.5h-2v2.498a.5.5 0 01-.854.354L4.646 9.854A.5.5 0 014.5 9.5v-5a.5.5 0 01.5-.5l.5.002z"/>
        </svg>
        <svg class="icon-close" width="24" height="24" viewBox="0 0 16 16" fill="currentColor">
            <path d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"/>
        </svg>
    </button>

    <div class="chat-widget-panel" id="chatWidgetPanel">
        <div class="chat-widget-header">
            <div class="chat-widget-header-icon">
                <svg width="20" height="20" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M8 0a8 8 0 100 16A8 8 0 008 0zM5.5 4.002h5a.5.5 0 01.5.5v5a.5.5 0 01-.5.5h-2v2.498a.5.5 0 01-.854.354L4.646 9.854A.5.5 0 014.5 9.5v-5a.5.5 0 01.5-.5l.5.002z"/>
                </svg>
            </div>
            <div class="chat-widget-header-text">
                <h3>Ask AI</h3>
                <p>Powered by GitHub Copilot</p>
            </div>
        </div>
        <div class="chat-widget-messages" id="widgetMessages">
            <div class="chat-welcome">
                <p>üëã Ask me about VS Code contributors!</p>
                <div class="suggested-questions">
                    <button class="suggestion-btn" onclick="widgetAsk('Who are the top contributors?')">Top contributors</button>
                    <button class="suggestion-btn" onclick="widgetAsk('What releases are available?')">Available releases</button>
                </div>
            </div>
        </div>
        <form class="chat-widget-input" onsubmit="return handleWidgetSubmit(event)">
            <div class="chat-input-wrapper">
                <input type="text" id="widgetInput" class="chat-input" placeholder="Ask a question..." autocomplete="off" />
                <button type="submit" class="chat-send-btn" id="widgetSendBtn">
                    <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M1.724 1.053a.5.5 0 00-.714.545l1.403 4.85a.5.5 0 00.397.354l5.69.953c.268.053.268.437 0 .49l-5.69.953a.5.5 0 00-.397.354l-1.403 4.85a.5.5 0 00.714.545l13-6.5a.5.5 0 000-.894l-13-6.5z"/>
                    </svg>
                </button>
            </div>
        </form>
    </div>

    <script>
        // Chat widget functionality
        const widgetTrigger = document.getElementById('chatWidgetTrigger');
        const widgetPanel = document.getElementById('chatWidgetPanel');
        const widgetMessages = document.getElementById('widgetMessages');
        const widgetInput = document.getElementById('widgetInput');
        const widgetSendBtn = document.getElementById('widgetSendBtn');
        let widgetLoading = false;

        widgetTrigger.addEventListener('click', () => {
            const isOpen = widgetPanel.classList.toggle('open');
            widgetTrigger.classList.toggle('active', isOpen);
            if (isOpen) widgetInput.focus();
        });

        function addWidgetMessage(content, isUser) {
            const welcome = widgetMessages.querySelector('.chat-welcome');
            if (welcome) welcome.style.display = 'none';
            
            const msgDiv = document.createElement('div');
            msgDiv.className = `chat-message ${isUser ? 'user' : 'assistant'}`;
            msgDiv.innerHTML = `<div class="message-content">${isUser ? escapeHtmlWidget(content) : content}</div>`;
            widgetMessages.appendChild(msgDiv);
            widgetMessages.scrollTop = widgetMessages.scrollHeight;
        }

        function escapeHtmlWidget(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function addWidgetLoading() {
            const loadingDiv = document.createElement('div');
            loadingDiv.className = 'chat-message assistant';
            loadingDiv.id = 'widgetLoading';
            loadingDiv.innerHTML = '<div class="message-content"><div class="typing-indicator"><span></span><span></span><span></span></div></div>';
            widgetMessages.appendChild(loadingDiv);
            widgetMessages.scrollTop = widgetMessages.scrollHeight;
        }

        function removeWidgetLoading() {
            const loading = document.getElementById('widgetLoading');
            if (loading) loading.remove();
        }

        async function widgetAsk(query) {
            if (widgetLoading || !query.trim()) return;
            widgetLoading = true;
            widgetSendBtn.disabled = true;
            widgetInput.value = '';
            
            addWidgetMessage(query, true);
            addWidgetLoading();
            
            try {
                const resp = await fetch('/api/ask', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ query })
                });
                removeWidgetLoading();
                if (!resp.ok) throw new Error('Request failed');
                const data = await resp.json();
                addWidgetMessage(data.answer || 'Sorry, I could not process that.', false);
            } catch (e) {
                removeWidgetLoading();
                addWidgetMessage('Sorry, something went wrong.', false);
            } finally {
                widgetLoading = false;
                widgetSendBtn.disabled = false;
                widgetInput.focus();
            }
        }

        function handleWidgetSubmit(e) {
            e.preventDefault();
            widgetAsk(widgetInput.value);
            return false;
        }
    </script>
</body>
</html>
